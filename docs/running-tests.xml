<?xml version="1.0"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
               "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<refentry id="gtu-Running-Tests">
  <refmeta>
    <refentrytitle role="top_of_page" id="gtu-Running-Tests.top_of_page">Running Tests</refentrytitle>
    <refmiscinfo>GTU Library</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>Extra features</refname>
    <refpurpose>Differences from standard GLib TAP</refpurpose>
  </refnamediv>

  <refsect1>
    <title>Make Variables</title>

    <formalpara id="TESTMODE:CAPS">
      <title><envar>TESTMODE</envar></title>
      <para>
        Allows the set of enabled tests to be configured without running test
        binaries explicitly.
      </para>

      <variablelist>
        <varlistentry>
          <term>perf</term>
          <listitem>
            <para>
              run performance tests
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>slow</term>
          <term>thorough</term>
          <listitem>
            <para>
              run slow tests, or repeat non-deterministic tests more often
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>quick</term>
          <listitem>
            <para>
              do not run slow tests, or do extra repeats of non-deterministic
              tests (default)
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>undefined</term>
          <listitem>
            <para>
              run test cases that deliberately provoke checks or assertion
              failures, if implemented (default)
            </para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>no-undefined</term>
          <listitem>
            <para>
              do not run test cases that deliberately provoke checks or
              assertion failures
            </para>
          </listitem>
        </varlistentry>
      </variablelist>

      <example>
        <title>Make invocation</title>
        <userinput>make check TESTMODE=perf,thorough</userinput>
      </example>

      <example>
        <title>Convenience Make rule</title>
        <programlisting language="make">
          check-all:
                  $(MAKE) check TESTMODE=perf,thorough

          .PHONY: check-all</programlisting>
      </example>
    </formalpara>
  </refsect1>

  <refsect1>
    <title>Environment Variables</title>

    <formalpara>
      <title><envar>GTU_DEBUG</envar></title>
      <para>
        Options altering the behaviour of GTU code.
      </para>

      <variablelist>
        <varlistentry>
          <term>fatal-asserts</term>
          <listitem>
            <para>
              Causes GTU to abort upon the failure of any GTU assertions. See
              <xref linkend="gtu-Asserts" endterm="gtu-Asserts.top_of_page"/>
              for more information.
            </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </formalpara>
  </refsect1>
</refentry>
