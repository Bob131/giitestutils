<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
               "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>
<section>
  <title>Make variables</title>

  <formalpara id="TESTMODE:CAPS">
    <title><envar>TESTMODE</envar></title>
    <para>
      Allows the set of enabled tests to be configured without running test
      binaries explicitly.
    </para>

    <variablelist>
      <varlistentry>
        <term>perf</term>
        <listitem>
          <para>
            run performance tests
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>slow</term>
        <term>thorough</term>
        <listitem>
          <para>
            run slow tests, or repeat non-deterministic tests more often
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>quick</term>
        <listitem>
          <para>
            do not run slow tests, or do extra repeats of non-deterministic
            tests (default)
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>undefined</term>
        <listitem>
          <para>
            run test cases that deliberately provoke checks or assertion
            failures, if implemented (default)
          </para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>no-undefined</term>
        <listitem>
          <para>
            do not run test cases that deliberately provoke checks or
            assertion failures
          </para>
        </listitem>
      </varlistentry>
    </variablelist>

    <example>
      <title>Make invocation</title>
      <userinput>make check TESTMODE=perf,thorough</userinput>
    </example>

    <example>
      <title>Convenience Make rule</title>
      <programlisting language="make">
        check-all:
                $(MAKE) check TESTMODE=perf,thorough

        .PHONY: check-all</programlisting>
    </example>
  </formalpara>
</section>
